---

copyright:
  years: 2017, 2019
lastupdated: "2019-03-15"

keywords: apps, best practices

subcollection: creating-apps

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}
{:note: .note}

# 优秀应用程序的要素是什么？
{: #best-practice}

在 {{site.data.keyword.cloud}} 中构建应用程序，以利用云提供的所有功能。这些最佳实践可帮助您确保应用程序是云就绪型应用程序。
{: shortdesc}

## 独立于拓扑构建应用程序

在非云环境中，应用程序可能会使用特定的部署拓扑。但是，因为云就绪型应用程序和服务允许进行即时可扩展性更改，所以应用程序拓扑在云应用程序中可能会更改。这些更改包括动态扩展和手动调整应用程序实例数。

在构建应用程序时，应尽可能确保应用程序是通用且无状态的，从而避免应用程序受到可扩展性更改的影响。

## 假定本地文件系统不是永久性的

在云上，应用程序实例可能会被移动、删除或复制，因此不要依赖于写入文件系统的文件。如果应用程序使用本地文件系统来高速缓存频繁使用的信息（包括应用程序日志），那么当关闭应用程序实例并在其他位置或其他 VM 上重新启动该实例时，这些信息会丢失。

您可以将信息存储在 SQL 或 NoSQL 数据库等服务中，而不是本地文件系统中。在动态云环境中，还有一点非常重要，那就是用于存储日志的服务必须比生成日志的应用程序实例具有更长的生命周期。

## 从应用程序中排除会话状态

系统状态是由数据库和共享存储器定义的，而不是由每个单独的运行中应用程序实例定义的。任何类型的有状态性都会限制应用程序的可扩展性。请尝试将会话状态存储在服务器上的集中位置，从而最大限度降低会话状态的影响。

如果无法完全消除会话状态，请将其向外推送到应用程序服务器外部的高可用性存储器。这些存储器包括 IBM WebSphere eXtreme Scale、Redis、Memcached 或外部数据库。

## 使用外部服务注册表解析服务端点

不要认为应用程序所使用的服务分配有特定的主机名或 IP 地址。在云环境中，服务可能会重新定位或重新生成，因此主机名和 IP 地址也可能会更改。

一种可改善此问题的做法是将特定于环境的依赖关系抽取到一组属性文件中，但这样做还是不够的。最佳做法是使用外部服务注册表来解析服务端点，或者将整个路由功能委派给带有虚拟名称的服务总线或负载均衡器。

## 使用多区域体系结构构建应用程序
{: #multiregion}

您可以运行多个实例以避免单个区域中产生停机时间。要交付更稳健的应用程序，请考虑多区域体系结构。

有关最大限度地减少停机时间和创建可实现最大可用性的弹性体系结构的信息，请参阅[弹性应用程序策略教程](/docs/tutorials?topic=solution-tutorials-strategies-for-resilient-applications)。

## 确保在监视应用程序
{: #monitoring}

通过 {{site.data.keyword.cloud_notm}}，可轻松使用 [New Relic](http://newrelic.com/){: new_window} ![外部链接图标](../icons/launch-glyph.svg "外部链接图标") 等服务来监视应用程序。

## 利用支持选项
{: #support}

{{site.data.keyword.cloud_notm}} 付费价格套餐提供了多种不同的帐户类型以及可选的付费支持。不管您的帐户类型是什么，如果您计划将应用程序放入 {{site.data.keyword.cloud_notm}} 上的生产环境，请考虑选择此选项。

不管是否使用付费支持，您都可以如[支持](/docs/get-support?topic=get-support-getting-customer-support)中所述获取帮助，从而避免遭受未预见的问题。

## 避免使用应用程序中的基础架构 API

如果依赖于应用程序中的特定基础架构 API，那么更改基础架构会更加困难，因为基础架构 API 可能会引用软件堆栈中的许多不同层。

可以改为依赖于现有开放式源代码或商业产品，并将 PaaS 解决方案保留在 PaaS 层中，以使其一直位于应用程序代码之外。

## 使用标准协议

不要使用需要额外配置才能实现弹性的模糊协议。

基于标准协议的应用程序可将配置项委派给平台，因而弹性更大。标准协议包括 HTTP、SSL、标准数据库、排队和 Web Service 连接。

## 使用兼容性库而非特定于操作系统的功能

如果已经使用了特定于操作系统的功能，那么可以通过兼容性库（例如，Cygwin 和 Mono）来解决此问题。Cygwin 是一种兼容性库，用于在 Windows 环境中提供一组 Linux 工具。Mono 是一种兼容性库，用于在 Linux 中提供 Windows .NET 工具。

避免特定于操作系统的依赖关系；请改用中间件基础架构或服务提供者提供的服务。

## 将安装过程脚本化

在动态云环境中，可能会根据需要频繁安装应用程序。安装过程必须脚本化并且可靠；配置数据必须从脚本外部化。

将应用程序安装作为一组独立于操作系统的统一脚本进行捕获。使应用程序安装保持较小且可移植，以适应不同的自动化方法。此外，尽可能减少应用程序安装需要的依赖关系。

有关云就绪型应用程序的更多信息，请参阅 [The Twelve-Factor App](http://12factor.net/){: new_window} ![外部链接图标](../icons/launch-glyph.svg "外部链接图标")。


